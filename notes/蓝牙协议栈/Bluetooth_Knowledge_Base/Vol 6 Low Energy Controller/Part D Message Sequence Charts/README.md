# Part D: Message Sequence Charts

**Start Page:** 3559

## Table of Contents

- 1 Introduction (Page 3563)
  - 1.1 Notation (Page 3563)
  - 1.2 Control flow (Page 3563)
  - 1.3 Example MSC (Page 3564)
  - 1.4 Forward compatibility (Page 3564)
- 2 Standby state (Page 3566)
  - 2.1 Initial setup (Page 3566)
  - 2.2 Random Device address (Page 3568)
  - 2.3 Filter Accept List (Page 3568)
  - 2.4 Adding IRK to resolving list (Page 3569)
  - 2.5 Default data length (Page 3569)
  - 2.6 Periodic Advertiser List (Page 3570)
- 3 Advertising state (Page 3571)
  - 3.1 Undirected advertising (Page 3571)
  - 3.2 Directed advertising (Page 3572)
  - 3.3 Advertising using ADV_EXT_IND (Page 3574)
  - 3.4 Scan request notifications (Page 3575)
  - 3.5 Advertising duration ended (Page 3576)
  - 3.6 Periodic advertising (Page 3577)
  - 3.7 Connectionless Constant Tone Extension transmission (Page 3578)
  - 3.8 Isochronous Broadcasting State (Page 3579)
    - 3.8.1 Create a Broadcast Isochronous Group (Page 3579)
    - 3.8.2 Terminate a Broadcast Isochronous Group (Page 3580)
  - 3.9 Periodic advertising with responses (PAwR) (Page 3580)
  - 3.10 Transmitting PAwR subevents (Page 3581)
  - 3.11 Using a response slot in PAwR (Page 3581)
  - 3.12 Connecting from PAwR (Page 3583)
  - 3.13 Failed Connection Attempts From PAWR (Page 3583)
- 4 Scanning state (Page 3585)
  - 4.1 Passive scanning (Page 3585)
  - 4.2 Active scanning (Page 3586)
  - 4.3 Passive scanning for directed advertisements with Privacy (Page 3587)
  - 4.4 Active scanning with Privacy (Page 3588)
  - 4.5 Active scanning with Privacy and Controller based resolvable private address generation (Page 3589)
  - 4.6 Active scanning on the secondary advertising Physical channel (Page 3590)
  - 4.7 Scan timeout (Page 3591)
  - 4.8 Scanning for periodic advertisements (Page 3592)
  - 4.9 Cancel scanning for periodic advertisements (Page 3593)
  - 4.10 Periodic advertising synchronization timeout (Page 3594)
  - 4.11 Terminate reception of periodic advertising (Page 3595)
  - 4.12 Connectionless Constant Tone Extension reception (Page 3596)
  - 4.13 Synchronization with separate enable of reports (Page 3597)
- 5 Initiating state (Page 3598)
  - 5.1 Initiating a connection (Page 3598)
  - 5.2 Canceling an initiation (Page 3599)
  - 5.3 Initiating a connection using undirected advertising with Privacy (Page 3600)
  - 5.4 Initiating a connection using directed advertising with Privacy (Page 3601)
  - 5.5 Initiating a connection that fails to establish (Page 3602)
  - 5.6 Initiating a connection on the secondary advertising physical channel (Page 3603)
  - 5.7 Initiating a Channel Selection algorithm #2 connection (Page 3604)
  - 5.8 Initiating a connection using an advertising set (Page 3605)
- 6 Connection state (Page 3606)
  - 6.1 Sending data (Page 3606)
  - 6.2 Connection update (Page 3607)
  - 6.3 Channel map update (Page 3607)
  - 6.4 Features exchange (Page 3608)
  - 6.5 Version exchange (Page 3612)
  - 6.6 Start encryption (Page 3614)
  - 6.7 Start encryption without long-term key (Page 3615)
  - 6.8 Start encryption with event masked (Page 3616)
  - 6.9 Start encryption without Peripheral supporting encryption (Page 3617)
  - 6.10 Restart encryption (Page 3618)
  - 6.11 Disconnect (Page 3619)
  - 6.12 Connection parameters request (Page 3620)
  - 6.13 LE Ping (Page 3625)
  - 6.14 Data length update (Page 3627)
  - 6.15 PHY update (Page 3628)
  - 6.16 Minimum number of used channels request (Page 3633)
  - 6.17 LL procedure collision (Page 3634)
  - 6.18 Constant Tone Extension Request (Page 3635)
  - 6.19 Connected Isochronous Group Setup (Page 3637)
  - 6.20 Host Rejects Connected Isochronous Stream (Page 3639)
  - 6.21 Link Layer Rejects Connected Isochronous Stream (Page 3641)
  - 6.22 Link Layer Rejects Connected Isochronous Stream (Page 3643)
  - 6.23 Host A Terminates Connected Isochronous Stream (Page 3643)
  - 6.24 ACL disconnected (Page 3645)
  - 6.25 Host A Removes Connected Isochronous Group (Page 3646)
  - 6.26 Request Sleep Clock Accuracy (Page 3648)
  - 6.27 Power Control (Page 3649)
  - 6.28 Data path setup for a music stream over a CIS (Page 3656)
  - 6.29 Data path setup for bi-directional voice over a CIS (Page 3658)
  - 6.30 [This section is no longer used] (Page 3659)
  - 6.31 Modifying the subrate of a connection (Page 3659)
  - 6.32 Channel Classification Enable (Page 3661)
  - 6.33 Channel Classification Reporting (Page 3662)
  - 6.34 Channel Sounding setup phase (Page 3663)
  - 6.35 Channel Sounding started by Central in initiator role (Page 3665)
  - 6.36 Channel Sounding started by Peripheral in reflector role (Page 3667)
  - 6.37 Channel Sounding started by Central, rejected by Peripheral (Page 3669)
  - 6.38 Channel Sounding configuration removal during an active CS procedure (Page 3669)
  - 6.39 Frame Space Update (Page 3670)
  - 6.40 Modifying the Connection Rate (Page 3672)
- 7 Periodic advertising sync transfer (Page 3675)
  - 7.1 Transfer by scanner, reports initially disabled (Page 3675)
  - 7.2 Transfer by scanner, reports initially enabled (Page 3676)
  - 7.3 Transfer by the advertiser (Page 3677)
- 8 Synchronization state (Page 3678)
  - 8.1 Synchronizing with a Broadcast Isochronous Group (Page 3678)
  - 8.2 Terminate Synchronization with a BIG (Page 3679)
  - 8.3 New Channel Map for Broadcast Isochronous Group (Page 3679)
  - 8.4 Lost Synchronization with a Broadcast Isochronous Group (Page 3680)
  - 8.5 Data path setup for a BIS (Page 3680)
