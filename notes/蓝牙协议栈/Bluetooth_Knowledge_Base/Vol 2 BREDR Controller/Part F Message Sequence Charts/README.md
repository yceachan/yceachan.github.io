# Part F: Message Sequence Charts

**Start Page:** 770

## Table of Contents

- 1 Introduction (Page 773)
  - 1.1 Notation (Page 773)
  - 1.2 Flow of control (Page 774)
  - 1.3 Example MSC (Page 774)
  - 1.4 Forward compatibility (Page 774)
- 2 Services without connection request (Page 776)
  - 2.1 Remote Name Request (Page 776)
  - 2.2 One-time inquiry (Page 778)
  - 2.3 Periodic inquiry (Page 780)
- 3 ACL connection establishment and detachment (Page 783)
  - 3.1 Connection setup (Page 784)
- 4 Optional activities after ACL connection establishment (Page 792)
  - 4.1 Authentication requested (Page 792)
  - 4.2 Secure Simple Pairing message sequence charts (Page 794)
    - 4.2.1 Optional OOB information collection (Page 795)
    - 4.2.2 Enable Secure Simple Pairing and Secure Connections (Page 796)
    - 4.2.3 Connection establishment (Page 797)
    - 4.2.4 L2CAP connection request for a secure service (Page 797)
    - 4.2.5 Optional OOB information transfer (Page 798)
    - 4.2.6 Start Secure Simple Pairing (Page 798)
    - 4.2.7 IO capability exchange (Page 800)
    - 4.2.8 Public key exchange (Page 800)
    - 4.2.9 Authentication (Page 801)
    - 4.2.10 Numeric Comparison (Page 802)
    - 4.2.11 Numeric Comparison failure on initiating side (Page 803)
    - 4.2.12 Numeric Comparison failure on responding side (Page 804)
    - 4.2.13 Passkey Entry (Page 804)
    - 4.2.14 Passkey Entry failure on responding side (Page 806)
    - 4.2.15 Passkey Entry failure on initiator side (Page 807)
    - 4.2.16 Out of Band (Page 808)
    - 4.2.17 OOB failure on initiator side (Page 810)
    - 4.2.18 DHKey checks (Page 810)
    - 4.2.19 Calculate link key (Page 812)
    - 4.2.20 Enable encryption (Page 813)
    - 4.2.21 L2CAP connection response (Page 813)
    - 4.2.22 LMP ping (Page 814)
  - 4.3 Link Supervision Timeout Changed event (Page 816)
  - 4.4 Set Connection Encryption (Page 817)
  - 4.5 Change connection link key (Page 819)
  - 4.6 Change connection link key with encryption pause and resume (Page 819)
  - 4.7 Temporary Link Key (Page 821)
  - 4.8 Read remote supported features (Page 822)
  - 4.9 Read remote extended features (Page 823)
  - 4.10 Read clock offset (Page 824)
  - 4.11 Role switch on an encrypted link using encryption pause and resume (Page 825)
  - 4.12 Refreshing encryption keys (Page 827)
  - 4.13 Read remote version information (Page 828)
  - 4.14 QoS setup (Page 829)
  - 4.15 Switch role (Page 830)
  - 4.16 [This section is no longer used] (Page 832)
  - 4.17 [This section is no longer used] (Page 832)
  - 4.18 Slot availability mask (Page 832)
  - 4.19 LMP transaction collision (Page 836)
- 5 Synchronous connection establishment and detachment (Page 837)
  - 5.1 Synchronous connection setup (Page 837)
  - 5.2 Synchronous connection setup with enhanced synchronous commands (Page 844)
- 6 Sniff and Hold modes (Page 851)
  - 6.1 Sniff mode (Page 851)
  - 6.2 Hold mode (Page 852)
  - 6.3 [This section is no longer used] (Page 854)
- 7 Buffer management, flow control (Page 855)
- 8 Loopback mode (Page 857)
  - 8.1 Local Loopback mode (Page 857)
  - 8.2 Remote Loopback mode (Page 859)
- 9 Connectionless Peripheral Broadcast services (Page 861)
