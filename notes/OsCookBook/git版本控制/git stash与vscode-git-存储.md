### 一、存储子菜单的入口

在 VS Code 左侧的**源代码管理**视图（快捷键 Ctrl+Shift+G）中，点击 "更改"（Changes）部分右上角的**三个点 (...)** 菜单，找到 **"存储"** 子菜单，展开即可看到所有相关选项。

------

### 二、菜单项与 Git 命令对应表

| VS Code 菜单项                                               | 对应 Git 命令                                 | 核心功能                                                     |
| ------------------------------------------------------------ | --------------------------------------------- | ------------------------------------------------------------ |
| **存储更改**（Stash Changes）                                | `git stash push -m "描述信息"`                | 临时保存当前工作区和暂存区的修改，工作区恢复到干净状态       |
| **存储更改（包含未跟踪文件）**（Stash Changes (Include Untracked)） | `git stash push -u -m "描述信息"`             | 保存修改并包含未被 Git 跟踪的新文件                          |
| **应用存储**（Apply Stash）                                  | `git stash apply [<stash@{n}>]`               | 恢复指定存储的修改，但**保留存储记录**在栈中                 |
| **弹出存储**（Pop Stash）                                    | `git stash pop [<stash@{n}>]`                 | 恢复指定存储的修改，并**从存储栈中删除该记录**（相当于 apply+drop） |
| **删除存储**（Drop Stash）                                   | `git stash drop [<stash@{n}>]`                | 从存储栈中删除指定的存储记录，**不恢复修改**                 |
| **从存储创建分支**（Branch from Stash）                      | `git stash branch <new-branch> [<stash@{n}>]` | 基于存储创建并切换到新分支，同时应用存储的修改               |

------

### 三、各功能详细说明

#### 1. 存储更改（Stash Changes）

- **命令**：`git stash push -m "描述信息"`（Git 2.13 + 推荐使用 push 替代 save）
- **功能**：将当前工作区和暂存区的修改保存到一个新的存储记录中，工作区恢复到最近一次提交的状态
- **使用场景**：需要切换分支、拉取远程代码或进行其他操作，但不想提交当前未完成的修改时
- **操作**：选择后输入存储描述，按回车完成保存

#### 2. 存储更改（包含未跟踪文件）

- **命令**：`git stash push -u -m "描述信息"`（`-u`等价于`--include-untracked`）
- **功能**：与普通存储类似，但额外保存未被 Git 跟踪的新文件（默认不包含）
- **注意**：仍不会保存被.gitignore 忽略的文件

#### 3. 应用存储（Apply Stash）

- **命令**：`git stash apply stash@{n}`（n 为存储索引，0 表示最近一次）
- **功能**：将指定存储的修改恢复到工作区和暂存区，**存储记录仍保留**在栈中，可多次应用
- **使用场景**：需要查看或测试存储的修改，但可能还要保留该存储用于其他分支
- **冲突处理**：若恢复时发生冲突，Git 会标记冲突文件，需手动解决后继续操作

#### 4. 弹出存储（Pop Stash）

- **命令**：`git stash pop stash@{n}`
- **功能**：与 apply 类似，但恢复后会自动删除该存储记录
- **使用场景**：确定不再需要该存储记录，恢复后直接清理栈空间
- **注意**：若弹出时发生冲突，存储记录**不会被删除**，需解决冲突后手动 drop

#### 5. 删除存储（Drop Stash）

- **命令**：`git stash drop stash@{n}`
- **功能**：仅删除指定的存储记录，**不恢复任何修改**
- **使用场景**：确认存储的修改不再需要，清理存储栈以节省空间

#### 6. 从存储创建分支（Branch from Stash）

- **命令**：`git stash branch <new-branch> stash@{n}`
- **功能**：创建一个新分支，分支起点为存储创建时的提交，然后应用存储的修改
- **使用场景**：存储的修改与当前分支冲突，或希望将存储的修改作为新功能分支的起点

------

### 四、查看存储列表

- **VS Code 操作**：在 "存储" 子菜单中可直接看到所有存储记录，显示为`stash@{n}: On <branch>: <描述信息>`
- **Git 命令**：`git stash list`，显示所有存储记录及其索引

------

### 五、使用技巧

1. **存储描述**：添加有意义的描述信息，方便后续识别存储内容
2. **选择存储**：应用、弹出或删除存储时，可通过上下箭头选择特定的存储记录
3. **快捷键**：使用 Ctrl+Shift+P 打开命令面板，输入 "Git: Stash" 快速访问所有存储相关命令
4. **存储与分支**：存储与分支无关，可在不同分支间应用存储的修改

------

### 总结

VS Code 的 Git 存储子菜单封装了 Git stash 的核心功能，让开发者无需记忆复杂命令即可完成临时保存、恢复和管理修改的操作。熟练使用这些功能，能有效提升多任务并行开发时的工作效率，避免未完成代码影响其他操作。